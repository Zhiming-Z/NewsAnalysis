# 热点新闻爬取与展示系统 - 系统架构图

## 1. 系统整体架构

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    用户访问层                                         │
│                                                                                       │
│    ┌──────────────────────────────────────────────────────────────────────────────┐  │
│    │                              Web 浏览器 / 移动端                               │  │
│    │                       (PC、平板、手机等多端访问)                               │  │
│    └────────────────────────────────────┬─────────────────────────────────────────┘  │
└─────────────────────────────────────────┼───────────────────────────────────────────┘
                                          │ HTTPS
                                          ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    负载均衡层                                         │
│                                                                                       │
│    ┌──────────────────────────────────────────────────────────────────────────────┐  │
│    │                              Nginx (反向代理)                                  │  │
│    │                    - SSL 终结                                                  │  │
│    │                    - 负载均衡                                                  │  │
│    │                    - 静态资源服务                                              │  │
│    │                    - API 路由                                                  │  │
│    └───────────────┬─────────────────────────────────────┬────────────────────────┘  │
└────────────────────┼─────────────────────────────────────┼──────────────────────────┘
                     │                                     │
         ┌───────────┘                                     └───────────┐
         │                                                             │
         ▼                                                             ▼
┌─────────────────────────────────┐                   ┌─────────────────────────────────┐
│        前端应用层                │                   │        后端服务层                │
│                                 │                   │                                 │
│  ┌───────────────────────────┐  │                   │  ┌───────────────────────────┐  │
│  │      Vue.js 3 SPA         │  │                   │  │     FastAPI 后端服务       │  │
│  │                           │  │                   │  │                           │  │
│  │  ├─ Element Plus UI       │  │     REST API      │  │  ├─ 新闻服务模块           │  │
│  │  ├─ Pinia 状态管理        │  │ ◄─────────────────►  │  ├─ 分类服务模块           │  │
│  │  ├─ Vue Router 路由       │  │                   │  │  ├─ 搜索服务模块           │  │
│  │  └─ Axios HTTP 客户端     │  │                   │  │  └─ 统计服务模块           │  │
│  └───────────────────────────┘  │                   │  └─────────────┬─────────────┘  │
│                                 │                   │                │               │
│  构建工具: Vite                 │                   │                │               │
│  部署: Docker + Nginx           │                   │  部署: Docker + Uvicorn        │
└─────────────────────────────────┘                   └────────────────┼───────────────┘
                                                                       │
                                                      ┌────────────────┴────────────────┐
                                                      │                                 │
                                                      ▼                                 ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                     数据存储层                                        │
│                                                                                       │
│  ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐          │
│  │    PostgreSQL 15    │  │      Redis 7        │  │   Elasticsearch     │          │
│  │                     │  │                     │  │     (可选)          │          │
│  │  ├─ 新闻数据        │  │  ├─ 热门新闻缓存    │  │                     │          │
│  │  ├─ 分类数据        │  │  ├─ 分类列表缓存    │  │  ├─ 全文搜索索引    │          │
│  │  ├─ 标签数据        │  │  ├─ URL 去重集合    │  │  └─ 新闻内容检索    │          │
│  │  ├─ 来源数据        │  │  ├─ 任务队列        │  │                     │          │
│  │  └─ 日志数据        │  │  └─ 会话缓存        │  │                     │          │
│  └─────────────────────┘  └─────────────────────┘  └─────────────────────┘          │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                     爬虫服务层                                        │
│                                                                                       │
│  ┌──────────────────────────────────────────────────────────────────────────────┐   │
│  │                            Celery Worker 集群                                  │   │
│  │                                                                                │   │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐               │   │
│  │  │  Scrapy 爬虫    │  │  Selenium 爬虫   │  │   数据处理器     │               │   │
│  │  │                 │  │                 │  │                 │               │   │
│  │  │ ├─ 新浪爬虫     │  │ ├─ 动态页面渲染  │  │ ├─ 数据清洗      │               │   │
│  │  │ ├─ 网易爬虫     │  │ ├─ JS 执行       │  │ ├─ 数据去重      │               │   │
│  │  │ ├─ 腾讯爬虫     │  │ └─ 截图保存      │  │ ├─ 自动分类      │               │   │
│  │  │ └─ 更多爬虫...  │  │                 │  │ └─ 数据入库      │               │   │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘               │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                          │                                          │
│  ┌─────────────────────────┐             │                                          │
│  │     Celery Beat         │─────────────┘ (定时触发)                               │
│  │   (定时任务调度器)       │                                                        │
│  └─────────────────────────┘                                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                          │
                                          ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                   外部新闻源                                          │
│                                                                                       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐     │
│  │ 新浪新闻  │ │ 网易新闻  │ │ 腾讯新闻  │ │ 今日头条  │ │ 澎湃新闻  │ │   36氪   │     │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 数据流程图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              新闻数据采集流程                                          │
└─────────────────────────────────────────────────────────────────────────────────────┘

     ┌──────────┐
     │ 定时触发  │ (每30分钟)
     └────┬─────┘
          │
          ▼
     ┌──────────┐      ┌──────────────────────────────────────────────────────┐
     │ 任务分发  │ ──► │  分发到多个 Worker 并行执行                            │
     └────┬─────┘      └──────────────────────────────────────────────────────┘
          │
          ├─────────────────┬─────────────────┬─────────────────┐
          ▼                 ▼                 ▼                 ▼
     ┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
     │ 新浪爬虫  │      │ 网易爬虫  │      │ 腾讯爬虫  │      │ 其他爬虫  │
     └────┬─────┘      └────┬─────┘      └────┬─────┘      └────┬─────┘
          │                 │                 │                 │
          └─────────────────┴─────────────────┴─────────────────┘
                                    │
                                    ▼
                             ┌──────────┐
                             │ 原始数据  │
                             │ 收集器   │
                             └────┬─────┘
                                  │
          ┌───────────────────────┼───────────────────────┐
          │                       │                       │
          ▼                       ▼                       ▼
     ┌──────────┐           ┌──────────┐           ┌──────────┐
     │ 数据清洗  │           │ URL去重   │           │ 标题去重  │
     │ Pipeline │           │ Pipeline │           │ Pipeline │
     └────┬─────┘           └────┬─────┘           └────┬─────┘
          │                       │                       │
          └───────────────────────┼───────────────────────┘
                                  │
                                  ▼
                            ┌──────────┐
                            │ 自动分类  │
                            │ Pipeline │
                            └────┬─────┘
                                 │
                                 ▼
                            ┌──────────┐
                            │ 数据入库  │
                            │ Pipeline │
                            └────┬─────┘
                                 │
                    ┌────────────┼────────────┐
                    ▼            ▼            ▼
               ┌────────┐  ┌────────┐   ┌────────┐
               │PostgreSQL│  │ Redis │   │ 日志   │
               │  存储   │  │ 缓存  │   │ 记录   │
               └────────┘  └────────┘   └────────┘
```

---

## 3. API 请求流程图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              API 请求处理流程                                          │
└─────────────────────────────────────────────────────────────────────────────────────┘

  客户端                Nginx               FastAPI              Redis            PostgreSQL
    │                    │                    │                    │                   │
    │  1. HTTP Request   │                    │                    │                   │
    │───────────────────►│                    │                    │                   │
    │                    │                    │                    │                   │
    │                    │ 2. 转发请求        │                    │                   │
    │                    │───────────────────►│                    │                   │
    │                    │                    │                    │                   │
    │                    │                    │ 3. 检查缓存        │                   │
    │                    │                    │───────────────────►│                   │
    │                    │                    │                    │                   │
    │                    │                    │    4a. 缓存命中    │                   │
    │                    │                    │◄───────────────────│                   │
    │                    │                    │                    │                   │
    │                    │                    │ 4b. 缓存未命中，查询DB                 │
    │                    │                    │────────────────────────────────────────►
    │                    │                    │                    │                   │
    │                    │                    │                    │    5. 返回数据    │
    │                    │                    │◄────────────────────────────────────────
    │                    │                    │                    │                   │
    │                    │                    │ 6. 更新缓存        │                   │
    │                    │                    │───────────────────►│                   │
    │                    │                    │                    │                   │
    │                    │ 7. 返回响应        │                    │                   │
    │                    │◄───────────────────│                    │                   │
    │                    │                    │                    │                   │
    │  8. HTTP Response  │                    │                    │                   │
    │◄───────────────────│                    │                    │                   │
    │                    │                    │                    │                   │
```

---

## 4. 部署架构图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              Docker Compose 部署架构                                   │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    Docker Host                                        │
│                                                                                       │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐ │
│  │                              Docker Network (bridge)                             │ │
│  │                                                                                   │ │
│  │  ┌───────────────┐                                                               │ │
│  │  │    nginx      │ ─────► 端口: 80, 443                                          │ │
│  │  │   Container   │        卷: ./nginx.conf:/etc/nginx/nginx.conf                 │ │
│  │  │               │             ./frontend/dist:/usr/share/nginx/html             │ │
│  │  └───────┬───────┘                                                               │ │
│  │          │                                                                        │ │
│  │          ├─────────────────────────────────────────┐                             │ │
│  │          ▼                                         ▼                             │ │
│  │  ┌───────────────┐                         ┌───────────────┐                     │ │
│  │  │   backend     │                         │   frontend    │                     │ │
│  │  │   Container   │                         │   Container   │ (构建阶段)          │ │
│  │  │               │                         │               │                     │ │
│  │  │  FastAPI      │                         │  Vue.js       │                     │ │
│  │  │  端口: 8000   │                         │  npm build    │                     │ │
│  │  └───────┬───────┘                         └───────────────┘                     │ │
│  │          │                                                                        │ │
│  │          ├─────────────────┬─────────────────┐                                   │ │
│  │          ▼                 ▼                 ▼                                   │ │
│  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐                          │ │
│  │  │   postgres    │ │    redis      │ │elasticsearch  │                          │ │
│  │  │   Container   │ │   Container   │ │  Container    │                          │ │
│  │  │               │ │               │ │   (可选)      │                          │ │
│  │  │  端口: 5432   │ │  端口: 6379   │ │  端口: 9200   │                          │ │
│  │  │  卷: pgdata   │ │  卷: redis    │ │  卷: esdata   │                          │ │
│  │  └───────────────┘ └───────────────┘ └───────────────┘                          │ │
│  │                                                                                   │ │
│  │  ┌───────────────┐ ┌───────────────┐                                            │ │
│  │  │   crawler     │ │  celery-beat  │                                            │ │
│  │  │   Container   │ │   Container   │                                            │ │
│  │  │               │ │               │                                            │ │
│  │  │ Celery Worker │ │ 定时调度器     │                                            │ │
│  │  │  多实例       │ │               │                                            │ │
│  │  └───────────────┘ └───────────────┘                                            │ │
│  └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                       │
│  数据卷:                                                                              │
│  ├─ pgdata: PostgreSQL 数据持久化                                                     │
│  ├─ redis_data: Redis 数据持久化                                                      │
│  └─ esdata: Elasticsearch 数据持久化                                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 前端组件架构

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              Vue.js 前端组件架构                                       │
└─────────────────────────────────────────────────────────────────────────────────────┘

                              ┌─────────────────┐
                              │     App.vue     │
                              │   (根组件)       │
                              └────────┬────────┘
                                       │
                    ┌──────────────────┼──────────────────┐
                    │                  │                  │
                    ▼                  ▼                  ▼
           ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
           │   Header    │    │   Sidebar   │    │   Footer    │
           │   Component │    │   Component │    │   Component │
           └─────────────┘    └──────┬──────┘    └─────────────┘
                                     │
                                     │ 分类导航
                                     ▼
                              ┌─────────────────┐
                              │   Router View   │
                              │   (路由出口)    │
                              └────────┬────────┘
                                       │
         ┌─────────────────────────────┼─────────────────────────────┐
         │                             │                             │
         ▼                             ▼                             ▼
┌─────────────────┐          ┌─────────────────┐          ┌─────────────────┐
│   Home View     │          │   News View     │          │  Search View    │
│   (首页)         │          │   (新闻详情)    │          │   (搜索结果)    │
└────────┬────────┘          └─────────────────┘          └─────────────────┘
         │
         │
┌────────┴────────────────────────────────────────────────┐
│                     首页组件结构                          │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │              Banner / 轮播图组件                     │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌─────────────────────┐  ┌─────────────────────────┐   │
│  │    热门新闻组件      │  │      最新新闻组件        │   │
│  │                     │  │                         │   │
│  │  ┌───────────────┐  │  │  ┌───────────────────┐  │   │
│  │  │  NewsCard     │  │  │  │    NewsCard       │  │   │
│  │  │  (新闻卡片)    │  │  │  │    (新闻卡片)     │  │   │
│  │  └───────────────┘  │  │  └───────────────────┘  │   │
│  │  ┌───────────────┐  │  │  ┌───────────────────┐  │   │
│  │  │  NewsCard     │  │  │  │    NewsCard       │  │   │
│  │  └───────────────┘  │  │  └───────────────────┘  │   │
│  └─────────────────────┘  └─────────────────────────┘   │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │              分类新闻区域                            │ │
│  │                                                      │ │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌────────┐ │ │
│  │  │  科技    │ │  经济    │ │  政治    │ │  更多  │ │ │
│  │  │  Tab     │ │  Tab     │ │  Tab     │ │  Tab   │ │ │
│  │  └──────────┘ └──────────┘ └──────────┘ └────────┘ │ │
│  │                                                      │ │
│  │  ┌───────────────────────────────────────────────┐  │ │
│  │  │            NewsList (新闻列表组件)            │  │ │
│  │  └───────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │              Pagination (分页组件)                  │ │
│  └────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────┘
```

---

## 6. 技术栈总览图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              技术栈总览                                               │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                  前端技术栈                                           │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│   │  Vue.js 3   │  │Element Plus │  │   Pinia     │  │   Axios     │              │
│   │  (核心框架)  │  │  (UI组件库)  │  │ (状态管理)  │  │ (HTTP客户端) │              │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘              │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                               │
│   │ Vue Router  │  │ TypeScript  │  │    Vite     │                               │
│   │   (路由)    │  │  (类型系统)  │  │  (构建工具)  │                               │
│   └─────────────┘  └─────────────┘  └─────────────┘                               │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                  后端技术栈                                           │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│   │ Python 3.11 │  │  FastAPI    │  │  SQLAlchemy │  │  Pydantic   │              │
│   │   (语言)    │  │ (Web框架)   │  │   (ORM)     │  │ (数据验证)   │              │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘              │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                               │
│   │   Celery    │  │   Scrapy    │  │  Selenium   │                               │
│   │ (任务队列)   │  │  (爬虫框架)  │  │ (动态爬取)  │                               │
│   └─────────────┘  └─────────────┘  └─────────────┘                               │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                  数据存储                                             │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                               │
│   │ PostgreSQL  │  │    Redis    │  │Elasticsearch│                               │
│   │  (主数据库)  │  │   (缓存)    │  │  (搜索引擎)  │                               │
│   └─────────────┘  └─────────────┘  └─────────────┘                               │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                  基础设施                                             │
│                                                                                       │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│   │   Docker    │  │Docker Compose│ │    Nginx    │  │  Supervisor │              │
│   │  (容器化)   │  │  (服务编排)  │  │ (反向代理)   │  │ (进程管理)   │              │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘              │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 附录

### A. 文档版本

| 版本 | 日期 | 修改说明 |
|------|------|----------|
| v1.0 | 2026-01-30 | 初始版本 |
